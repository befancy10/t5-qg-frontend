!function(){
    window;
    const e = document.documentElement;

    if(e.classList.remove("no-js"), e.classList.add("js"), document.body.classList.contains("has-animations")) {

        // ScrollReveal untuk elemen feature dan pricing (tetap sama)
        if(window.ScrollReveal) {
            (window.sr = ScrollReveal()).reveal(".feature, .pricing-table-inner", {
                duration: 600,
                distance: "20px",
                easing: "cubic-bezier(0.5, -0.01, 0, 1.005)",
                origin: "bottom",
                interval: 100
            });
        }

        e.classList.add("anime-ready");

        // Fungsi helper untuk random
        function random(min, max) {
            return Math.random() * (max - min) + min;
        }

        // --- ANIMASI ENTRANCE BARU UNTUK HERO FIGURES ---

        // Animasi untuk box-05 (Morphing entrance - sedikit diubah)
        if(window.anime) {
            anime.timeline({targets: ".hero-figure-box-05"})
                .add({
                    duration: 600, // Sedikit lebih lama
                    easing: "easeInOutQuart", // Easing yang berbeda
                    scaleX: [0.01, 1], // Mulai sangat kecil dan membesar
                    scaleY: [0.01, 1],
                    rotate: [random(-360, 360), 0], // Tambah rotasi awal acak
                    opacity: [0, 1],
                    delay: random(0, 300) // Delay awal sedikit acak
                })
                .add({
                    duration: 800,
                    easing: "easeOutElastic(1, .8)", // Efek elastis saat akhir
                    rotateY: "-25deg",
                    rotateX: "15deg",
                    rotateZ: "-5deg",
                    translateZ: "20px"
                });
        }

        // Animasi untuk box-06 dan box-07 (Spiral entrance - sedikit diubah)
        if(window.anime) {
            anime.timeline({targets: ".hero-figure-box-06, .hero-figure-box-07"})
                .add({
                    duration: 700, // Durasi lebih lama
                    easing: "easeInOutQuart",
                    scaleX: [0, 1],
                    scaleY: [0, 1],
                    translateX: [function() { return random(-100, 100); }, 0], // Geser acak dari samping
                    translateY: [function() { return random(-100, 100); }, 0], // Geser acak dari atas/bawah
                    opacity: [0, 1],
                    delay: anime.stagger(150, {start: 400}) // Staggered delay
                })
                .add({
                    duration: 1000,
                    easing: "easeOutElastic(1, .7)", // Efek elastis
                    rotateZ: "30deg", // Rotasi akhir
                    translateY: "-10px",
                    translateX: "5px"
                });
        }

        // Animasi untuk box lainnya (Spinning entrance - sedikit diubah)
        if(window.anime) {
            anime({
                targets: ".hero-figure-box-01, .hero-figure-box-02, .hero-figure-box-03, .hero-figure-box-04, .hero-figure-box-08, .hero-figure-box-09, .hero-figure-box-10",
                duration: function() { return random(900, 1400); }, // Durasi lebih bervariasi
                delay: function() { return random(200, 800); }, // Delay lebih bervariasi
                rotate: [
                    function() { return random(-540, 540); }, // Rotasi awal sedikit lebih terkontrol
                    function(el) {
                        const baseRotation = parseInt(el.getAttribute("data-rotation")) || 0;
                        return baseRotation + random(-30, 30) + "deg"; // Rotasi akhir lebih dekat ke baseRotation
                    }
                ],
                scale: [0, 1], // Muncul dari sangat kecil
                opacity: [0, 1],
                translateY: [random(-80, 80), 0],
                translateX: [random(-80, 80), 0],
                easing: "easeOutBack(1.7)" // Easing dengan sedikit "overshoot"
            });
        }

        // --- EFEK TEKAN (CLICK) UNTUK SEMUA HERO FIGURES ---
        document.querySelectorAll('[class*="hero-figure-box"]').forEach(function(box) {
            // Animasi hover yang sudah ada
            box.addEventListener('mouseenter', function() {
                this.style.transition = 'transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
                this.style.transform += ' scale(1.1)';
            });

            box.addEventListener('mouseleave', function() {
                this.style.transition = 'transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94)';
                this.style.transform = this.style.transform.replace(/ scale\([^)]+\)/g, '');
            });

            // Animasi klik (efek tekan)
            box.addEventListener('mousedown', function() {
                anime({
                    targets: this,
                    scale: 0.9, // Sedikit mengecil saat ditekan
                    duration: 100,
                    easing: "easeOutQuad"
                });
            });

            box.addEventListener('mouseup', function() {
                anime({
                    targets: this,
                    scale: 1.1, // Kembali ke scale hover setelah dilepas (karena mouse masih di atas)
                    duration: 200,
                    easing: "easeOutElastic(1, .5)" // Efek elastis saat kembali
                });
            });

            // Jika mouse dilepas di luar elemen setelah klik
            box.addEventListener('mouseout', function() {
                 anime({
                    targets: this,
                    scale: 1, // Kembali ke ukuran normal jika mouse keluar
                    duration: 200,
                    easing: "easeOutQuad"
                });
            });
        });
    }
}();